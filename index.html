<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Talk2Text"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Talk2Text</title><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Talk2Text"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="manifest.json"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="theme-color" content="#e5edf4"><style>*{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent;}body{background:#f7f7f7;}.hdr{padding:.75em;font-size:1.5em;cursor:pointer;color:#f7f7f7;background:#0074d9;}textarea{overflow-y:scroll;width:100%;height:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:.5em;resize:none;}</style><script>(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define([],function(){return root.talk2text=factory(root)})}else if(typeof module==="object"&&module.exports){module.exports=factory(root)}else{root.talk2text=factory(root)}})(typeof window!=="undefined"?window:this,function(root,undefined){"use strict";var _SpeechRecognition=root.SpeechRecognition||root.webkitSpeechRecognition||root.mozSpeechRecognition||root.msSpeechRecognition||root.oSpeechRecognition;if(!_SpeechRecognition){return null}var _languages={"bn-IN":"বাংলা-ভারত","en-IN":"English","gu-IN":"ગુજરાતી","kn-IN":"ಕನ್ನಡ","ml-IN":"മലയാളം","mr-IN":"मराठी","ta-IN":"தமிழ்","te-IN":"తెలుగు","ur-IN":"اُردُو-بھارت","hi-IN":"हिन्दी"};var _isDebug=false;var _lastStart=0;var _autoRestart=false;var _autoRestartCount=0;var _isListening=false;var _lastError="";var _defaultCallback=function(type,data){console.log((new Date).toLocaleTimeString(),type,data)};var _callback=_defaultCallback;var _log=function(s){if(s&&_isDebug){console.log((new Date).toLocaleTimeString()+": "+s)}};var _sr=new _SpeechRecognition;_sr.maxAlternatives=5;_sr.continuous=root.location.protocol==="http:";_sr.lang="en-US";_sr.onstart=function(){_isListening=true;_callback("onstart")};_sr.onend=function(){_isListening=false;_callback("onend");if(_autoRestart){var timeSinceLastStart=(new Date).getTime()-_lastStart;_autoRestartCount+=1;if(_autoRestartCount%10===0){_log("Speech Recognition is repeatedly stopping and starting.")}if(timeSinceLastStart<1e3){setTimeout(function(){_sr.start()},1e3-timeSinceLastStart)}else{_sr.start()}}};_sr.onsoundstart=function(){_callback("onsoundstart")};_sr.onerror=function(evt){if(_isListening){_lastError="- "+evt.error;if("not-allowed"==evt.error||"service-not-allowed"==evt.error){_autoRestart=false;if((new Date).getTime()-_lastStart<200){_lastError="-not-allowed-system"}else{_lastError="-not-allowed-user"}}_callback("onerror",_lastError)}};_sr.onresult=function(evt){var r=evt.results[evt.resultIndex];var results=[];for(var k=0;k<r.length;k++){results[k]=r[k].transcript}_callback("onresult",results)};return{SpeechRecognition:function(){return _sr},isListening:function(){return _isListening},lastError:function(){return _lastError},getLanguages:function(){return _languages},debug:function(newState){var newState=newState||true;_isDebug=!!newState},start:function(options){if(_isListening){return}options=options||{};if(options.callback!==undefined&&typeof options.callback==="function"){_callback=options.callback}if(options.autoRestart!==undefined){_autoRestart=!!options.autoRestart}else{_autoRestart=true}if(options.language!==undefined&&_languages[options.language]){_sr.lang=options.language}_lastError="";_lastStart=(new Date).getTime();try{_sr.start()}catch(e){_callback("onexception",e.message)}},setLanguage:function(newLanguage){if(_languages[newLanguage]){_sr.lang=newLanguage}},stop:function(){if(_sr){_autoRestart=false;_autoRestartCount=0;_lastError="";_sr.abort()}}}});</script></head><body><script>var el={};var qs={};var lang="ta-IN";var colors={success:"#2ecc40",warning:"#ffdc00",error:"#ff4136",default:"#0074d9"};var onklick=function(evt){if(!talk2text.isListening()){hdr(" starting...",colors.warning);talk2text.start({autoRestart:true,language:lang,callback:cb})}else{talk2text.stop()}};var onresize=function(evt){el.txt.style.height=window.innerHeight-el.hdr.clientHeight+"px";el.txt.focus()};var hdr=function(txt,bgcolor){el.hdr.style.background=bgcolor||colors.default;el.hdr.innerText=languages[lang]+" "+txt};var cb=function(type,data){if(qs.debug){console.log(type,data)}switch(type){case"onstart":break;case"onend":if(talk2text.lastError()){hdr(" klick2start")}break;case"onsoundstart":hdr(" talk2text",colors.success);break;case"onerror":hdr(data,colors.error);break;case"onresult":var w=data[0];var v=el.txt.value;el.txt.value=v.slice(0,el.txt.selectionStart)+w+v.slice(el.txt.selectionEnd);el.txt.focus();break;default:console.log(type,data)}};var languages=talk2text.getLanguages();var main=function(){el.hdr=document.createElement("div");el.hdr.className="hdr";el.hdr.addEventListener("click",onklick,false);document.body.appendChild(el.hdr);el.txt=document.createElement("textarea");el.txt.addEventListener("resize",onresize,false);document.body.appendChild(el.txt);qs=function(){var m={};(window.location.search||"?").substr(1).replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(match,k,v){m[k]=v});return m}();if(languages[qs.lang]){lang=qs.lang}hdr("klick2start");onresize();onklick()};window.addEventListener("load",main,false);</script></body></html>
